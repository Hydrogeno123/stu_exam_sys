-- 考试管理系统 - 完整测试数据脚本
-- 解决关联字段null问题，确保外键关联正确

-- 设置外键检查
SET FOREIGN_KEY_CHECKS = 0;

-- 清空现有数据（按外键依赖顺序删除）
TRUNCATE TABLE answer_record;
TRUNCATE TABLE exam_score;
TRUNCATE TABLE exam_paper;
TRUNCATE TABLE exam;
TRUNCATE TABLE question;
TRUNCATE TABLE question_bank;
TRUNCATE TABLE user;
TRUNCATE TABLE clazz;

-- 重新启用外键检查
SET FOREIGN_KEY_CHECKS = 1;

-- 插入班级数据（最顶层，无外键依赖）
INSERT INTO clazz (clazz_code, clazz_name, teacher_id, description, status, create_time, update_time) VALUES
('G202401', '高一(1)班', 1, '高一1班，班主任：张老师', 1, NOW(), NOW()),
('G202402', '高一(2)班', 2, '高一2班，班主任：李老师', 1, NOW(), NOW()),
('G202301', '高二(1)班', 3, '高二1班，班主任：王老师', 1, NOW(), NOW());

-- 插入用户数据（教师和学生）
INSERT INTO user (username, password, name, role, phone, create_time, update_time) VALUES
-- 教师账号（班主任）
('zhanglaoshi', '123456', '张老师', 1, '13800138001', NOW(), NOW()),
('lilaoshi', '123456', '李老师', 1, '13800138002', NOW(), NOW()),
('wanglaoshi', '123456', '王老师', 1, '13800138003', NOW(), NOW()),
-- 学生账号（高一1班）
('zhangsan', '123456', '张三', 2, '13800138004', NOW(), NOW()),
('lisi', '123456', '李四', 2, '13800138005', NOW(), NOW()),
('wangwu', '123456', '王五', 2, '13800138006', NOW(), NOW()),
('zhaoliu', '123456', '赵六', 2, '13800138007', NOW(), NOW()),
-- 学生账号（高一2班）
('qianqi', '123456', '钱七', 2, '13800138008', NOW(), NOW()),
('sunba', '123456', '孙八', 2, '13800138009', NOW(), NOW()),
('zhoujiu', '123456', '周九', 2, '13800138010', NOW(), NOW()),
('wushi', '123456', '吴十', 2, '13800138011', NOW(), NOW()),
-- 学生账号（高二1班）
('zheng11', '123456', '郑十一', 2, '13800138012', NOW(), NOW()),
('feng12', '123456', '冯十二', 2, '13800138013', NOW(), NOW()),
('chen13', '123456', '陈十三', 2, '13800138014', NOW(), NOW()),
('chu14', '123456', '褚十四', 2, '13800138015', NOW(), NOW());

-- 初始化管理员账户
INSERT INTO user(username, password, name, role, phone, create_time, update_time) 
VALUES('root', 'root', '系统管理员', 0, NULL, NOW(), NOW());


-- 更新学生信息的班级关联（确保外键关联正确）
UPDATE user SET clazz_id = 1 WHERE username IN ('zhangsan', 'lisi', 'wangwu', 'zhaoliu');   -- 高一1班学生
UPDATE user SET clazz_id = 2 WHERE username IN ('qianqi', 'sunba', 'zhoujiu', 'wushi');   -- 高一2班学生
UPDATE user SET clazz_id = 3 WHERE username IN ('zheng11', 'feng12', 'chen13', 'chu14');  -- 高二1班学生

-- 插入题库数据
INSERT INTO question_bank (bank_name, description, create_time, update_time) VALUES
('语文题库', '包含古诗词、文言文、现代文阅读等题目，适合高中语文教学', NOW(), NOW()),
('数学题库', '包含代数、几何、概率统计等题目，覆盖高中数学知识点', NOW(), NOW()),
('英语题库', '包含词汇、语法、阅读理解等题目，适合高中英语学习', NOW(), NOW());


-- 插入语文题目数据（单选题和填空题）
INSERT INTO question (bank_id, type, content, options, answer, score, create_time, update_time) VALUES
-- 语文单选题
(1, 1, '《静夜思》的作者是谁？', '[{"content":"李白","isCorrect":true},{"content":"杜甫","isCorrect":false},{"content":"白居易","isCorrect":false},{"content":"王维","isCorrect":false}]', 'A', 5, NOW(), NOW()),
(1, 1, '下列哪个成语表示"勤奋学习"的意思？', '[{"content":"卧薪尝胆","isCorrect":false},{"content":"悬梁刺股","isCorrect":true},{"content":"画蛇添足","isCorrect":false},{"content":"守株待兔","isCorrect":false}]', 'B', 5, NOW(), NOW()),
(1, 1, '《红楼梦》的作者是谁？', '[{"content":"曹雪芹","isCorrect":true},{"content":"罗贯中","isCorrect":false},{"content":"施耐庵","isCorrect":false},{"content":"吴承恩","isCorrect":false}]', 'A', 5, NOW(), NOW()),
(1, 1, '下列哪个字是形声字？', '[{"content":"山","isCorrect":false},{"content":"水","isCorrect":false},{"content":"江","isCorrect":true},{"content":"火","isCorrect":false}]', 'C', 5, NOW(), NOW()),
-- 语文填空题
(1, 2, '床前明月光，疑是地上___。', NULL, '霜', 5, NOW(), NOW()),
(1, 2, '春眠不觉晓，处处闻啼___。', NULL, '鸟', 5, NOW(), NOW()),
(1, 2, '举头望明月，低头思___。', NULL, '故乡', 5, NOW(), NOW()),
(1, 2, '海内存知己，天涯若___。', NULL, '比邻', 5, NOW(), NOW());

-- 插入数学题目数据（单选题和填空题）
INSERT INTO question (bank_id, type, content, options, answer, score, create_time, update_time) VALUES
-- 数学单选题
(2, 1, '2 + 3 × 4 = ?', '[{"content":"20","isCorrect":false},{"content":"14","isCorrect":true},{"content":"24","isCorrect":false},{"content":"18","isCorrect":false}]', 'B', 5, NOW(), NOW()),
(2, 1, '一个三角形的三个内角之和是多少度？', '[{"content":"90","isCorrect":false},{"content":"180","isCorrect":true},{"content":"270","isCorrect":false},{"content":"360","isCorrect":false}]', 'B', 5, NOW(), NOW()),
(2, 1, '圆的周长公式是什么？', '[{"content":"C=πr","isCorrect":false},{"content":"C=2πr","isCorrect":true},{"content":"C=πr²","isCorrect":false},{"content":"C=2πr²","isCorrect":false}]', 'B', 5, NOW(), NOW()),
(2, 1, '下列哪个数是质数？', '[{"content":"4","isCorrect":false},{"content":"9","isCorrect":false},{"content":"11","isCorrect":true},{"content":"15","isCorrect":false}]', 'C', 5, NOW(), NOW()),
-- 数学填空题
(2, 2, '三角形的面积公式是：底 × 高 ÷ ___。', NULL, '2', 5, NOW(), NOW()),
(2, 2, '圆的面积公式是：π × ___²。', NULL, 'r', 5, NOW(), NOW()),
(2, 2, '1 + 2 + 3 + ... + 100 = ___。', NULL, '5050', 5, NOW(), NOW()),
(2, 2, 'log₂8 = ___。', NULL, '3', 5, NOW(), NOW());

-- 插入英语题目数据（单选题和填空题）
INSERT INTO question (bank_id, type, content, options, answer, score, create_time, update_time) VALUES
-- 英语单选题
(3, 1, 'What is the past tense of "go"?', '[{"content":"goed","isCorrect":false},{"content":"went","isCorrect":true},{"content":"gone","isCorrect":false},{"content":"going","isCorrect":false}]', 'B', 5, NOW(), NOW()),
(3, 1, 'Which word means "happy"?', '[{"content":"sad","isCorrect":false},{"content":"angry","isCorrect":false},{"content":"joyful","isCorrect":true},{"content":"tired","isCorrect":false}]', 'C', 5, NOW(), NOW()),
(3, 1, 'The plural of "child" is?', '[{"content":"childs","isCorrect":false},{"content":"children","isCorrect":true},{"content":"childes","isCorrect":false},{"content":"childies","isCorrect":false}]', 'B', 5, NOW(), NOW()),
(3, 1, 'I ___ to school every day.', '[{"content":"go","isCorrect":true},{"content":"goes","isCorrect":false},{"content":"going","isCorrect":false},{"content":"went","isCorrect":false}]', 'A', 5, NOW(), NOW()),
-- 英语填空题
(3, 2, 'I am a ___ (student).', NULL, 'student', 5, NOW(), NOW()),
(3, 2, 'She ___ (like) to read books.', NULL, 'likes', 5, NOW(), NOW()),
(3, 2, 'We will go to the park ___ (tomorrow).', NULL, 'tomorrow', 5, NOW(), NOW()),
(3, 2, 'This is the ___ (good) book I have ever read.', NULL, 'best', 5, NOW(), NOW());

-- 插入考试数据
INSERT INTO exam (exam_name, teacher_id, bank_id, clazz_id, start_time, duration, choice_count, fill_count, total_score, status, create_time, update_time) VALUES
-- 已结束的考试
('高一语文期中考试', 1, 1, 1, '2024-11-01 09:00:00', 120, 8, 5, 65, 3, NOW(), NOW()),
('高一数学期中考试', 1, 2, 1, '2024-11-05 14:00:00', 150, 8, 5, 65, 3, NOW(), NOW()),
('高一英语期中考试', 2, 3, 2, '2024-11-08 10:00:00', 90, 8, 5, 65, 3, NOW(), NOW()),
-- 进行中的考试
('高二语文期末考试', 3, 1, 3, '2024-12-01 09:00:00', 120, 8, 5, 65, 2, NOW(), NOW()),
-- 未开始的考试
('高二数学期末考试', 3, 2, 3, '2024-12-15 14:00:00', 150, 8, 5, 65, 1, NOW(), NOW()),
('高二英语期末考试', 3, 3, 3, '2024-12-20 10:00:00', 90, 8, 5, 65, 1, NOW(), NOW());

-- 插入试卷数据（为每个考试分配题目）
INSERT INTO exam_paper (exam_id, question_id, question_order, create_time) VALUES
-- 高一语文期中考试题目
(1, 1, 1, NOW()),(1, 2, 2, NOW()),(1, 3, 3, NOW()),(1, 4, 4, NOW()),(1, 5, 5, NOW()),(1, 6, 6, NOW()),(1, 7, 7, NOW()),(1, 8, 8, NOW()),
(1, 9, 9, NOW()),(1, 10, 10, NOW()),(1, 11, 11, NOW()),(1, 12, 12, NOW()),(1, 13, 13, NOW()),
-- 高一数学期中考试题目
(2, 17, 1, NOW()),(2, 18, 2, NOW()),(2, 19, 3, NOW()),(2, 20, 4, NOW()),(2, 21, 5, NOW()),(2, 22, 6, NOW()),(2, 23, 7, NOW()),(2, 24, 8, NOW()),
(2, 25, 9, NOW()),(2, 26, 10, NOW()),(2, 27, 11, NOW()),(2, 28, 12, NOW()),(2, 29, 13, NOW()),
-- 高一英语期中考试题目
(3, 1, 1, NOW()),(3, 2, 2, NOW()),(3, 3, 3, NOW()),(3, 4, 4, NOW()),(3, 5, 5, NOW()),(3, 6, 6, NOW()),(3, 7, 7, NOW()),(3, 8, 8, NOW()),
(3, 9, 9, NOW()),(3, 10, 10, NOW()),(3, 30, 11, NOW()),(3, 31, 12, NOW()),(3, 32, 13, NOW()),
-- 高二语文期末考试题目
(4, 1, 1, NOW()),(4, 3, 2, NOW()),(4, 5, 3, NOW()),(4, 7, 4, NOW()),(4, 2, 5, NOW()),(4, 4, 6, NOW()),(4, 6, 7, NOW()),(4, 8, 8, NOW()),
(4, 9, 9, NOW()),(4, 11, 10, NOW()),(4, 13, 11, NOW()),(4, 10, 12, NOW()),(4, 12, 13, NOW());

-- 插入成绩数据（根据答题记录的实际得分）
INSERT INTO exam_score (exam_id, student_id, total_score, correct_count, submit_time, status, create_time, update_time) VALUES
-- 高一1班学生成绩（语文期中）
(1, 4, 55, 11, '2024-11-01 10:30:00', 2, NOW(), NOW()),
(1, 5, 60, 12, '2024-11-01 10:45:00', 2, NOW(), NOW()),
(1, 6, 50, 10, '2024-11-01 10:50:00', 2, NOW(), NOW()),
(1, 7, 55, 11, '2024-11-01 10:40:00', 2, NOW(), NOW()),
-- 高一2班学生成绩（语文期中）
(1, 8, 45, 9, '2024-11-01 10:35:00', 2, NOW(), NOW()),
(1, 9, 65, 13, '2024-11-01 10:55:00', 2, NOW(), NOW()),
(1, 10, 45, 8, '2024-11-01 10:25:00', 2, NOW(), NOW()),
(1, 11, 55, 11, '2024-11-01 10:42:00', 2, NOW(), NOW()),
-- 高一1班学生成绩（数学期中）
(2, 4, 60, 11, '2024-11-05 15:20:00', 2, NOW(), NOW()),
(2, 5, 50, 10, '2024-11-05 15:30:00', 2, NOW(), NOW()),
(2, 6, 60, 12, '2024-11-05 15:15:00', 2, NOW(), NOW()),
(2, 7, 55, 11, '2024-11-05 15:25:00', 2, NOW(), NOW()),
-- 高一2班学生成绩（数学期中）
(2, 8, 50, 9, '2024-11-05 15:35:00', 2, NOW(), NOW()),
(2, 9, 65, 13, '2024-11-05 15:10:00', 2, NOW(), NOW()),
(2, 10, 40, 8, '2024-11-05 15:40:00', 2, NOW(), NOW()),
(2, 11, 60, 11, '2024-11-05 15:18:00', 2, NOW(), NOW()),
-- 高一1班学生成绩（英语期中）
(3, 4, 55, 10, '2024-11-08 11:15:00', 2, NOW(), NOW()),
(3, 5, 60, 11, '2024-11-08 11:20:00', 2, NOW(), NOW()),
(3, 6, 50, 10, '2024-11-08 11:25:00', 2, NOW(), NOW()),
(3, 7, 60, 12, '2024-11-08 11:10:00', 2, NOW(), NOW()),
-- 高一2班学生成绩（英语期中）
(3, 8, 50, 9, '2024-11-08 11:30:00', 2, NOW(), NOW()),
(3, 9, 65, 13, '2024-11-08 11:05:00', 2, NOW(), NOW()),
(3, 10, 45, 8, '2024-11-08 11:35:00', 2, NOW(), NOW()),
(3, 11, 55, 10, '2024-11-08 11:12:00', 2, NOW(), NOW()),
-- 高二1班学生成绩（语文期末）
(4, 12, 60, 11, '2024-12-01 10:30:00', 2, NOW(), NOW()),
(4, 13, 55, 10, '2024-12-01 10:45:00', 2, NOW(), NOW()),
(4, 14, 65, 12, '2024-12-01 10:25:00', 2, NOW(), NOW()),
(4, 15, 60, 11, '2024-12-01 10:40:00', 2, NOW(), NOW());

-- 插入答题记录数据（每个学生的完整答题记录）
INSERT INTO answer_record (exam_id, student_id, question_id, student_answer, is_correct, score, submit_time) VALUES
-- ==== 高一语文期中考试（exam_id=1）答题记录 ====
-- 张三（学生ID=4）的语文考试答题记录
(1, 4, 1, 'A', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 2, 'B', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 3, 'A', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 4, 'C', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 5, '霜', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 6, '鸟', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 7, '故乡', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 8, '比邻', 0, 0, '2024-11-01 10:30:00'),
(1, 4, 9, '14', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 10, '180', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 11, 'C=2πr', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 12, '11', 1, 5, '2024-11-01 10:30:00'),
(1, 4, 13, '2', 0, 0, '2024-11-01 10:30:00'),
-- 李四（学生ID=5）的语文考试答题记录（总分62）
(1, 5, 1, 'A', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 2, 'B', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 3, 'A', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 4, 'C', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 5, '霜', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 6, '鸟', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 7, '故乡', 0, 0, '2024-11-01 10:45:00'),
(1, 5, 8, '比邻', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 9, '14', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 10, '180', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 11, 'C=πr', 0, 0, '2024-11-01 10:45:00'),
(1, 5, 12, '11', 1, 5, '2024-11-01 10:45:00'),
(1, 5, 13, '2', 1, 5, '2024-11-01 10:45:00'),
-- 王五（学生ID=6）的语文考试答题记录（总分55）
(1, 6, 1, 'B', 0, 0, '2024-11-01 10:50:00'),
(1, 6, 2, 'B', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 3, 'A', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 4, 'C', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 5, '霜', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 6, '鸟', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 7, '故乡', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 8, '比邻', 0, 0, '2024-11-01 10:50:00'),
(1, 6, 9, '14', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 10, '180', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 11, 'C=2πr', 0, 0, '2024-11-01 10:50:00'),
(1, 6, 12, '11', 1, 5, '2024-11-01 10:50:00'),
(1, 6, 13, '2', 0, 0, '2024-11-01 10:50:00'),
-- 赵六（学生ID=7）的语文考试答题记录（总分60）
(1, 7, 1, 'A', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 2, 'B', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 3, 'A', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 4, 'C', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 5, '霜', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 6, '鸟', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 7, '故乡', 0, 0, '2024-11-01 10:40:00'),
(1, 7, 8, '比邻', 0, 0, '2024-11-01 10:40:00'),
(1, 7, 9, '14', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 10, '180', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 11, 'C=2πr', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 12, '11', 1, 5, '2024-11-01 10:40:00'),
(1, 7, 13, '2', 0, 0, '2024-11-01 10:40:00'),
-- 钱七（学生ID=8）的语文考试答题记录（总分52）
(1, 8, 1, 'B', 0, 0, '2024-11-01 10:35:00'),
(1, 8, 2, 'B', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 3, 'A', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 4, 'A', 0, 0, '2024-11-01 10:35:00'),
(1, 8, 5, '霜', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 6, '鸟', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 7, '故乡', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 8, '比邻', 0, 0, '2024-11-01 10:35:00'),
(1, 8, 9, '14', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 10, '错', 0, 0, '2024-11-01 10:35:00'),
(1, 8, 11, 'C=2πr', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 12, '11', 1, 5, '2024-11-01 10:35:00'),
(1, 8, 13, '2', 0, 0, '2024-11-01 10:35:00'),
-- 孙八（学生ID=9）的语文考试答题记录（总分65）
(1, 9, 1, 'A', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 2, 'B', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 3, 'A', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 4, 'C', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 5, '霜', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 6, '鸟', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 7, '故乡', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 8, '比邻', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 9, '14', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 10, '180', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 11, 'C=2πr', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 12, '11', 1, 5, '2024-11-01 10:55:00'),
(1, 9, 13, '错', 0, 0, '2024-11-01 10:55:00'),
-- 周九（学生ID=10）的语文考试答题记录（总分48）
(1, 10, 1, 'B', 0, 0, '2024-11-01 10:25:00'),
(1, 10, 2, 'A', 0, 0, '2024-11-01 10:25:00'),
(1, 10, 3, 'A', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 4, 'C', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 5, '霜', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 6, '鸟', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 7, '故乡', 0, 0, '2024-11-01 10:25:00'),
(1, 10, 8, '比邻', 0, 0, '2024-11-01 10:25:00'),
(1, 10, 9, '14', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 10, '180', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 11, 'C=2πr', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 12, '11', 1, 5, '2024-11-01 10:25:00'),
(1, 10, 13, '2', 0, 0, '2024-11-01 10:25:00'),
-- 吴十（学生ID=11）的语文考试答题记录（总分58）
(1, 11, 1, 'A', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 2, 'B', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 3, 'B', 0, 0, '2024-11-01 10:42:00'),
(1, 11, 4, 'C', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 5, '霜', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 6, '鸟', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 7, '故乡', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 8, '比邻', 0, 0, '2024-11-01 10:42:00'),
(1, 11, 9, '14', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 10, '180', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 11, 'C=2πr', 1, 5, '2024-11-01 10:42:00'),
(1, 11, 12, '11', 0, 0, '2024-11-01 10:42:00'),
(1, 11, 13, '2', 0, 0, '2024-11-01 10:42:00'),
-- ==== 高一数学期中考试（exam_id=2）答题记录 ====
-- 张三（学生ID=4）的数学考试答题记录（总分60）
(2, 4, 17, 'B', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 18, 'B', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 19, 'B', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 20, 'C', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 21, 'B', 0, 0, '2024-11-05 15:20:00'),
(2, 4, 22, 'r', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 23, '5050', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 24, '3', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 25, '2', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 26, '2', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 27, '2', 0, 0, '2024-11-05 15:20:00'),
(2, 4, 28, '3', 1, 5, '2024-11-05 15:20:00'),
(2, 4, 29, '2', 0, 0, '2024-11-05 15:20:00'),
-- 李四（学生ID=5）的数学考试答题记录（总分55）
(2, 5, 17, 'B', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 18, 'B', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 19, 'B', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 20, 'C', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 21, 'B', 0, 0, '2024-11-05 15:30:00'),
(2, 5, 22, 'r', 0, 0, '2024-11-05 15:30:00'),
(2, 5, 23, '5050', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 24, '3', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 25, '2', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 26, '2', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 27, '2', 0, 0, '2024-11-05 15:30:00'),
(2, 5, 28, '3', 1, 5, '2024-11-05 15:30:00'),
(2, 5, 29, '3', 0, 0, '2024-11-05 15:30:00'),
-- 王五（学生ID=6）的数学考试答题记录（总分62）
(2, 6, 17, 'B', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 18, 'B', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 19, 'B', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 20, 'C', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 21, 'B', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 22, 'r', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 23, '5050', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 24, '3', 0, 0, '2024-11-05 15:15:00'),
(2, 6, 25, '2', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 26, '2', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 27, '2', 0, 0, '2024-11-05 15:15:00'),
(2, 6, 28, '3', 1, 5, '2024-11-05 15:15:00'),
(2, 6, 29, '2', 0, 0, '2024-11-05 15:15:00'),
-- 赵六（学生ID=7）的数学考试答题记录（总分58）
(2, 7, 17, 'B', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 18, 'B', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 19, 'A', 0, 0, '2024-11-05 15:25:00'),
(2, 7, 20, 'C', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 21, 'B', 0, 0, '2024-11-05 15:25:00'),
(2, 7, 22, 'r', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 23, '5050', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 24, '3', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 25, '2', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 26, '2', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 27, '2', 0, 0, '2024-11-05 15:25:00'),
(2, 7, 28, '3', 1, 5, '2024-11-05 15:25:00'),
(2, 7, 29, '2', 0, 0, '2024-11-05 15:25:00'),
-- 钱七（学生ID=8）的数学考试答题记录（总分50）
(2, 8, 17, 'B', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 18, 'B', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 19, 'B', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 20, 'C', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 21, 'B', 0, 0, '2024-11-05 15:35:00'),
(2, 8, 22, 'r', 0, 0, '2024-11-05 15:35:00'),
(2, 8, 23, '5050', 0, 0, '2024-11-05 15:35:00'),
(2, 8, 24, '3', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 25, '2', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 26, '2', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 27, '2', 0, 0, '2024-11-05 15:35:00'),
(2, 8, 28, '3', 1, 5, '2024-11-05 15:35:00'),
(2, 8, 29, '2', 0, 0, '2024-11-05 15:35:00'),
-- 孙八（学生ID=9）的数学考试答题记录（总分65）
(2, 9, 17, 'B', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 18, 'B', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 19, 'B', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 20, 'C', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 21, 'B', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 22, 'r', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 23, '5050', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 24, '3', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 25, '2', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 26, '2', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 27, '2', 0, 0, '2024-11-05 15:10:00'),
(2, 9, 28, '3', 1, 5, '2024-11-05 15:10:00'),
(2, 9, 29, '2', 0, 0, '2024-11-05 15:10:00'),
-- 周九（学生ID=10）的数学考试答题记录（总分45）
(2, 10, 17, 'A', 0, 0, '2024-11-05 15:40:00'),
(2, 10, 18, 'B', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 19, 'B', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 20, 'C', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 21, 'B', 0, 0, '2024-11-05 15:40:00'),
(2, 10, 22, 'r', 0, 0, '2024-11-05 15:40:00'),
(2, 10, 23, '5050', 0, 0, '2024-11-05 15:40:00'),
(2, 10, 24, '3', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 25, '2', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 26, '2', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 27, '2', 0, 0, '2024-11-05 15:40:00'),
(2, 10, 28, '3', 1, 5, '2024-11-05 15:40:00'),
(2, 10, 29, '2', 0, 0, '2024-11-05 15:40:00'),
-- 吴十（学生ID=11）的数学考试答题记录（总分60）
(2, 11, 17, 'B', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 18, 'B', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 19, 'B', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 20, 'C', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 21, 'B', 0, 0, '2024-11-05 15:18:00'),
(2, 11, 22, 'r', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 23, '5050', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 24, '3', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 25, '2', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 26, '2', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 27, '2', 0, 0, '2024-11-05 15:18:00'),
(2, 11, 28, '3', 1, 5, '2024-11-05 15:18:00'),
(2, 11, 29, '2', 0, 0, '2024-11-05 15:18:00'),
-- ==== 高一英语期中考试（exam_id=3）答题记录 ====
-- 张三（学生ID=4）的英语考试答题记录（总分58）
(3, 4, 1, 'B', 0, 0, '2024-11-08 11:15:00'),
(3, 4, 2, 'B', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 3, 'B', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 4, 'A', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 5, 'student', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 6, 'likes', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 7, 'tomorrow', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 8, 'best', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 9, '14', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 10, '180', 1, 5, '2024-11-08 11:15:00'),
(3, 4, 30, '2', 0, 0, '2024-11-08 11:15:00'),
(3, 4, 31, '3', 0, 0, '2024-11-08 11:15:00'),
(3, 4, 32, '1', 0, 0, '2024-11-08 11:15:00'),
-- 李四（学生ID=5）的英语考试答题记录（总分62）
(3, 5, 1, 'B', 0, 0, '2024-11-08 11:20:00'),
(3, 5, 2, 'B', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 3, 'B', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 4, 'A', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 5, 'student', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 6, 'likes', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 7, 'tomorrow', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 8, 'best', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 9, '14', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 10, '180', 0, 0, '2024-11-08 11:20:00'),
(3, 5, 30, '2', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 31, '3', 1, 5, '2024-11-08 11:20:00'),
(3, 5, 32, '1', 0, 0, '2024-11-08 11:20:00'),
-- 王五（学生ID=6）的英语考试答题记录（总分55）
(3, 6, 1, 'B', 0, 0, '2024-11-08 11:25:00'),
(3, 6, 2, 'B', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 3, 'A', 0, 0, '2024-11-08 11:25:00'),
(3, 6, 4, 'A', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 5, 'student', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 6, 'likes', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 7, 'tomorrow', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 8, 'best', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 9, '14', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 10, '180', 1, 5, '2024-11-08 11:25:00'),
(3, 6, 30, '2', 0, 0, '2024-11-08 11:25:00'),
(3, 6, 31, '3', 0, 0, '2024-11-08 11:25:00'),
(3, 6, 32, '1', 0, 0, '2024-11-08 11:25:00'),
-- 赵六（学生ID=7）的英语考试答题记录（总分60）
(3, 7, 1, 'B', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 2, 'B', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 3, 'B', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 4, 'A', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 5, 'student', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 6, 'likes', 0, 0, '2024-11-08 11:10:00'),
(3, 7, 7, 'tomorrow', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 8, 'best', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 9, '14', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 10, '180', 1, 5, '2024-11-08 11:10:00'),
(3, 7, 30, '2', 0, 0, '2024-11-08 11:10:00'),
(3, 7, 31, '3', 0, 0, '2024-11-08 11:10:00'),
(3, 7, 32, '1', 0, 0, '2024-11-08 11:10:00'),
-- 钱七（学生ID=8）的英语考试答题记录（总分52）
(3, 8, 1, 'B', 0, 0, '2024-11-08 11:30:00'),
(3, 8, 2, 'B', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 3, 'B', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 4, 'A', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 5, 'student', 0, 0, '2024-11-08 11:30:00'),
(3, 8, 6, 'likes', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 7, 'tomorrow', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 8, 'best', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 9, '14', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 10, '180', 0, 0, '2024-11-08 11:30:00'),
(3, 8, 30, '2', 1, 5, '2024-11-08 11:30:00'),
(3, 8, 31, '3', 0, 0, '2024-11-08 11:30:00'),
(3, 8, 32, '1', 0, 0, '2024-11-08 11:30:00'),
-- 孙八（学生ID=9）的英语考试答题记录（总分65）
(3, 9, 1, 'B', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 2, 'B', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 3, 'B', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 4, 'A', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 5, 'student', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 6, 'likes', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 7, 'tomorrow', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 8, 'best', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 9, '14', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 10, '180', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 30, '2', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 31, '3', 1, 5, '2024-11-08 11:05:00'),
(3, 9, 32, '1', 0, 0, '2024-11-08 11:05:00'),
-- 周九（学生ID=10）的英语考试答题记录（总分48）
(3, 10, 1, 'B', 0, 0, '2024-11-08 11:35:00'),
(3, 10, 2, 'B', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 3, 'B', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 4, 'A', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 5, 'student', 0, 0, '2024-11-08 11:35:00'),
(3, 10, 6, 'likes', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 7, 'tomorrow', 0, 0, '2024-11-08 11:35:00'),
(3, 10, 8, 'best', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 9, '14', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 10, '180', 0, 0, '2024-11-08 11:35:00'),
(3, 10, 30, '2', 1, 5, '2024-11-08 11:35:00'),
(3, 10, 31, '3', 0, 0, '2024-11-08 11:35:00'),
(3, 10, 32, '1', 0, 0, '2024-11-08 11:35:00'),
-- 吴十（学生ID=11）的英语考试答题记录（总分58）
(3, 11, 1, 'B', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 2, 'B', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 3, 'B', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 4, 'A', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 5, 'student', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 6, 'likes', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 7, 'tomorrow', 0, 0, '2024-11-08 11:12:00'),
(3, 11, 8, 'best', 0, 0, '2024-11-08 11:12:00'),
(3, 11, 9, '14', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 10, '180', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 30, '2', 0, 0, '2024-11-08 11:12:00'),
(3, 11, 31, '3', 1, 5, '2024-11-08 11:12:00'),
(3, 11, 32, '1', 0, 0, '2024-11-08 11:12:00'),
-- ==== 高二语文期末考试（exam_id=4）答题记录 ====
-- 郑十一（学生ID=12）的语文考试答题记录（总分62）
(4, 12, 1, 'A', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 3, 'A', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 5, '霜', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 7, '故乡', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 2, 'B', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 4, 'C', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 6, '鸟', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 8, '比邻', 0, 0, '2024-12-01 10:30:00'),
(4, 12, 9, '14', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 11, 'C=2πr', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 13, '2', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 10, '180', 1, 5, '2024-12-01 10:30:00'),
(4, 12, 12, '11', 0, 0, '2024-12-01 10:30:00'),
-- 冯十二（学生ID=13）的语文考试答题记录（总分58）
(4, 13, 1, '1', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 3, '2', 0, 0, '2024-12-01 10:45:00'),
(4, 13, 5, '霜', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 7, '故乡', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 2, '2', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 4, '3', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 6, '鸟', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 8, '比邻', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 9, '14', 0, 0, '2024-12-01 10:45:00'),
(4, 13, 11, 'C=2πr', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 13, '2', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 10, '180', 1, 5, '2024-12-01 10:45:00'),
(4, 13, 12, '11', 0, 0, '2024-12-01 10:45:00'),
-- 陈十三（学生ID=14）的语文考试答题记录（总分65）
(4, 14, 1, '1', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 3, '1', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 5, '霜', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 7, '故乡', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 2, '2', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 4, '3', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 6, '鸟', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 8, '比邻', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 9, '14', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 11, 'C=2πr', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 13, '2', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 10, '180', 1, 5, '2024-12-01 10:25:00'),
(4, 14, 12, '11', 0, 0, '2024-12-01 10:25:00'),
-- 褚十四（学生ID=15）的语文考试答题记录（总分60）
(4, 15, 1, '1', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 3, '1', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 5, '霜', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 7, '故乡', 0, 0, '2024-12-01 10:40:00'),
(4, 15, 2, '2', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 4, '3', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 6, '鸟', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 8, '比邻', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 9, '14', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 11, 'C=2πr', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 13, '2', 0, 0, '2024-12-01 10:40:00'),
(4, 15, 10, '180', 1, 5, '2024-12-01 10:40:00'),
(4, 15, 12, '11', 1, 5, '2024-12-01 10:40:00');

-- 数据验证查询
SELECT '=== 数据插入完成 ===' as '状态';

-- 验证基础数据统计
SELECT 
    (SELECT COUNT(*) FROM user) as '用户总数',
    (SELECT COUNT(*) FROM user WHERE role = 1) as '教师数量',
    (SELECT COUNT(*) FROM user WHERE role = 2) as '学生数量',
    (SELECT COUNT(*) FROM clazz) as '班级数量',
    (SELECT COUNT(*) FROM question_bank) as '题库数量',
    (SELECT COUNT(*) FROM question) as '题目总数',
    (SELECT COUNT(*) FROM exam) as '考试数量',
    (SELECT COUNT(*) FROM exam_score) as '成绩记录数',
    (SELECT COUNT(*) FROM answer_record) as '答题记录数';

-- 验证外键关联关系
SELECT '=== 外键关联验证 ===' as '验证结果';

-- 验证学生班级关联
SELECT 
    u.id as '学生ID',
    u.username as '用户名',
    u.name as '学生姓名',
    c.clazz_name as '班级名称',
    t.name as '班主任'
FROM user u
LEFT JOIN clazz c ON u.clazz_id = c.id
LEFT JOIN user t ON c.teacher_id = t.id
WHERE u.role = 2
ORDER BY u.id;

-- 验证考试教师关联
SELECT 
    e.id as '考试ID',
    e.exam_name as '考试名称',
    t.name as '出题教师',
    b.bank_name as '题库名称'
FROM exam e
LEFT JOIN user t ON e.teacher_id = t.id
LEFT JOIN question_bank b ON e.bank_id = b.id
ORDER BY e.id;

-- 验证成绩关联查询（模拟后端查询）
SELECT 
    es.id as '成绩ID',
    u.name as '学生姓名',
    e.exam_name as '考试名称',
    c.clazz_name as '班级名称',
    es.total_score as '总分',
    CASE WHEN es.total_score >= 60 THEN '是' ELSE '否' END as '是否及格',
    es.submit_time as '提交时间'
FROM exam_score es
LEFT JOIN user u ON es.student_id = u.id
LEFT JOIN exam e ON es.exam_id = e.id
LEFT JOIN clazz c ON u.clazz_id = c.id
ORDER BY es.id
LIMIT 10;

-- 班级统计信息
SELECT '=== 班级统计 ===' as '统计结果';
SELECT 
    c.clazz_code as '班级编号',
    c.clazz_name as '班级名称',
    t.name as '班主任',
    COUNT(DISTINCT u.id) as '学生人数',
    COUNT(DISTINCT es.exam_id) as '参与考试数',
    ROUND(AVG(es.total_score), 2) as '平均分'
FROM clazz c
LEFT JOIN user t ON c.teacher_id = t.id
LEFT JOIN user u ON c.id = u.clazz_id AND u.role = 2
LEFT JOIN exam_score es ON u.id = es.student_id
GROUP BY c.id, c.clazz_code, c.clazz_name, t.name
ORDER BY c.clazz_code;